const chapters = [
    {
        type: 'cover',
        title: 'Nossa História',
        subtitle: 'Um Conto de Fadas Moderno',
        dedication: 'Escrito com todo o amor do mundo'
    },
    {
        type: 'chapter',
        number: 'I',
        title: 'A capa, ou tudo o que não se vê',
        content: `Toda capa é uma tentativa. Uma forma tímida de dizer "entre" sem revelar o que espera do outro lado.

Você sempre foi assim. Quem olha de fora vê calma, vê doçura, vê silêncio. Mas não imagina o quanto de mundo existe aí dentro. Não imagina quantas perguntas você carrega. Quantas histórias você viveu sem contar. Quantos sentimentos você aprendeu a guardar para não pesar ninguém.

Esse livro começa aqui, mas não nasceu agora. Ele nasceu no dia em que você entrou na minha vida sem promessas, sem discursos, sem fazer barulho.

Você entrou e ficou. E às vezes, ficar é o gesto mais corajoso que alguém pode fazer.`
    },
    {
        type: 'chapter',
        number: 'II',
        title: 'Olha pra nós, mas sem pressa',
        content: `Antes de continuar, olha pra nossa foto.

<div class="photo-container">
    <img src="4.jpeg" alt="Nossa Foto" class="chapter-photo">
</div>

Não como quem revisita uma lembrança, mas como quem toca uma verdade. Existe algo naquela imagem que não se repete. Um instante em que o tempo desacelerou e tudo pareceu no lugar certo, mesmo sem estar perfeito.

Tudo o que está escrito aqui nasce daquele segundo. Daquele olhar. Daquele silêncio confortável entre dois corpos que não precisavam se explicar.

Se você sentir o peito apertar, fica. Não vira a página ainda. Algumas emoções precisam ser sentidas até o fim.`
    },
    {
        type: 'chapter',
        number: 'III',
        title: 'As livrarias e o seu jeito de existir',
        content: `Você ama livrarias porque elas não exigem nada de você. Elas apenas oferecem. Oferecem silêncio sem solidão. Oferecem companhia sem invasão. Oferecem histórias para quem sabe ouvir.

Você entra nesses lugares como quem entra em abrigo. Anda devagar, como se respeitasse cada livro. Como se soubesse que ali existem vidas inteiras guardadas em papel.

Você passa a mão nas capas não por hábito, mas por afeto. Talvez porque você também seja feita assim: cheia de histórias por dentro, esperando alguém que saiba tocar com cuidado.

Você nunca foi feita para o raso. Nunca foi feita para o barulho. Você pertence aos lugares onde o silêncio é cheio.`
    },
    {
        type: 'chapter',
        number: 'IV',
        title: 'Coca 10, ou sobre ser inteira',
        content: `Você prefere Coca 10. E talvez você nunca tenha parado para pensar no que isso revela sobre você.

Você não gosta do que é diluído. Não gosta do que tenta ser correto demais e acaba perdendo o gosto. Você escolhe o que é inteiro. Mesmo que seja intenso. Mesmo que seja demais para alguns.

Você sempre foi assim com tudo. Com o sentir. Com o amar. Com o viver. Você não sabe existir pela metade. E talvez por isso o mundo às vezes canse você.

Mas nunca mude isso. Ser inteira é raro.`
    },
    {
        type: 'chapter',
        number: 'V',
        title: 'Doce não é exagero, é linguagem',
        content: `Você ama doce. E não é gula. É linguagem. É a forma como você acolhe o mundo. Como você encontra conforto. Como você se permite pequenas felicidades.

Você gosta do que aquece por dentro. Do que lembra infância. Do que transforma um dia comum em algo suportável.

E você também é assim com as pessoas. Você adoça ambientes. Adoça conversas. Adoça dias difíceis sem nem perceber.

Às vezes você acha que sente demais. Mas a verdade é que você apenas sente de verdade.`
    },
    {
        type: 'chapter',
        number: 'VI',
        title: 'Animação, Disney e aquilo que você reconhece',
        content: `Você ama animação porque animação não mente. Ela fala de sentimentos grandes sem pedir desculpa por isso.

Você entende essas histórias porque elas falam de coragem silenciosa, de amor paciente, de identidade, de esperança.

Você não assiste. Você se reconhece. Principalmente nos filmes da Disney, onde tudo parece simples, mas nada é raso. Eles te tocam porque falam a sua língua.`
    },
    {
        type: 'chapter',
        number: 'VII',
        title: 'Enrolados e a luz que você guardou',
        content: `Você decorou as falas. As músicas. Os silêncios. Enrolados não é só um filme pra você. É um espelho delicado.

Rapunzel, presa numa torre, cheia de sonhos, com medo do mundo e uma luz absurda dentro de si. Você também passou tempo demais se protegendo. Aprendendo a não confiar rápido. Guardando o brilho para não se machucar.

Mas a luz nunca apagou. Ela só esperou. E eu vejo essa luz. Mesmo nos dias em que você tenta escondê-la.`
    },
    {
        type: 'chapter',
        number: 'VIII',
        title: 'A Bela e a Fera, ou o amor que fica',
        content: `Você ama A Bela e a Fera porque você entende. Entende que amar não é transformar o outro à força. É ficar enquanto ele aprende.

Você vê beleza onde outros só veem dificuldade. Você acredita em redenção. Em cuidado. Em tempo.

Você ama com profundidade. Com paciência. Com entrega silenciosa. E esse tipo de amor não se aprende em qualquer lugar.`
    },
    {
        type: 'chapter',
        number: 'IX',
        title: 'Barbie e a menina que nunca foi embora',
        content: `A Barbie nunca foi só um brinquedo. Foi possibilidade. Enquanto o mundo dizia quem você deveria ser, você criava versões infinitas de si mesma.

Você inventava histórias. Construía mundos. Decidia destinos.

Você cresceu, mas não abandonou essa menina criativa, sensível, cheia de imaginação. E ainda bem. Porque é ela que faz você ser quem é hoje.`
    },
    {
        type: 'chapter',
        number: 'X',
        title: 'O jeito como você escreve e se protege',
        content: `Você escreve como quem sente demais e tenta sobreviver a isso. Usa metáforas como abrigo. Escolhe palavras com cuidado. Mas o coração sempre escapa.

Seu texto é profundo porque você é profunda. É verdadeiro porque você é verdadeira. Mesmo quando tenta disfarçar.

Você escreve com a alma aberta, mesmo quando acha que não.`
    },
    {
        type: 'chapter',
        number: 'XI',
        title: 'O seu silêncio',
        content: `O seu silêncio não é vazio. Ele é cheio de pensamentos longos. De perguntas sem resposta. De sentimentos que ainda não encontraram forma.

Eu aprendi a ficar nesses silêncios. A não apressar. A não tentar consertar.

Nem tudo precisa ser resolvido. Algumas coisas só precisam ser sentidas.`
    },
    {
        type: 'chapter',
        number: 'XII',
        title: 'Pandora, amor que ensina',
        content: `O jeito que você ama a Pandora diz tudo sobre você. O cuidado. A atenção. A delicadeza.

Ela não é só um pet. Ela é casa. Ela é família. Ela é parte do nosso "nós".

Ver você amar assim me faz acreditar ainda mais em você.`
    },
    {
        type: 'chapter',
        number: 'XIV',
        title: 'O seu sorriso e o sol que ele traz',
        content: `O seu sorriso não é apenas um movimento dos lábios. É um evento. É o jeito como seus olhos apertam um pouquinho, como se guardassem um segredo feliz. É a forma como o ambiente parece ficar mais leve, como se você tivesse o poder de reorganizar o caos apenas existindo.

Eu amo os sorrisos tímidos, aqueles que escapam quando você está distraída, mas amo ainda mais os gargalhados, aqueles que vêm do fundo da alma e me fazem querer parar o tempo só para ouvir o som da sua alegria.`
    },
    {
        type: 'chapter',
        number: 'XV',
        title: 'A sua força silenciosa',
        content: `Muita gente vê a sua doçura e esquece da sua força. Mas eu vejo. Vejo o jeito como você enfrenta os dias difíceis, mesmo quando o cansaço pesa. Vejo como você protege quem ama, como se torna um porto seguro para os outros, mesmo quando o seu próprio mar está agitado.

Você tem uma resiliência que não precisa de gritos para ser notada. É uma força feita de persistência, de fé e de uma coragem que nasce da sua bondade. Ser forte como você é, sendo tão delicada, é a coisa mais bonita que já vi.`
    },
    {
        type: 'chapter',
        number: 'XVI',
        title: 'O jeito que você cuida dos detalhes',
        content: `Você percebe o que ninguém mais vê. A cor de uma flor no caminho, o tom de voz de alguém que não está bem, o detalhe pequeno em um presente que faz toda a diferença.

O seu cuidado é uma forma de arte. Você não apenas passa pela vida; você a observa, a sente e a embeleza. Ter você por perto é aprender a ver o mundo com mais carinho, é entender que a felicidade mora nos detalhes que você, com sua sensibilidade, insiste em não deixar passar.`
    },
    {
        type: 'chapter',
        number: 'XVII',
        title: 'O nosso "nós"',
        content: `No final das contas, este livro é sobre você, mas também é sobre o que nos tornamos. É sobre as piadas internas que só nós entendemos, sobre os planos que fazemos para o futuro e sobre a paz que sinto quando estou ao seu lado.

Você transformou a minha vida em um lugar melhor. Você deu cor aos meus dias cinzas e sentido aos meus silêncios. Este livro não tem um fim, porque enquanto houver um "nós", haverá sempre uma nova página para escrever.`
    },
    {
        type: 'chapter',
        number: 'XVIII',
        title: 'Seus olhinhos de jabuticaba',
        content: `Existem coisas que as palavras tentam explicar, mas só o olhar consegue sentir. E os seus olhos... eles são como duas jabuticabas perfeitas. Negros, brilhantes e profundos.

Eu amo o jeito como eles brilham quando você fala de algo que ama, como se houvesse uma luz própria guardada ali dentro. São olhos que sorriem antes mesmo da sua boca, que entregam a sua doçura e a sua inteligência em um único relance.

Olhar para esses seus olhinhos é como mergulhar em um universo particular, onde tudo é mais calmo e verdadeiro. Eles têm um brilho que me hipnotiza, uma transparência que me faz sentir em casa.`
    },
    {
        type: 'chapter',
        number: 'XIX',
        title: 'O seu cabelo e o seu movimento',
        content: `O seu cabelo não é apenas moldura para o seu rosto; ele é parte da sua liberdade. Eu amo o jeito como ele acompanha o seu ritmo. O movimento que ele faz quando você caminha, o jeito como ele cai sobre os seus ombros quando você está concentrada.

Seja preso em um coque apressado nos dias de rotina, ou solto e livre ao vento, ele tem um brilho que parece refletir a sua energia. Às vezes, sinto que cada fio guarda um pouco da sua história, do seu perfume e da sua essência. Há uma beleza única na forma como você lida com ele, como se ele fosse uma extensão do seu humor e da sua alma.`
    },
    {
        type: 'chapter',
        number: 'XX',
        title: 'O seu perfume e o meu cafuné',
        content: `Existe um perfume que não vem de nenhum frasco, mas que é o meu favorito no mundo: o cheiro do seu cabelo. É um aroma que me traz paz, que me diz que estou no lugar certo.

Mas o momento em que tudo se completa é quando minha mão encontra o seu cabelo. Eu amo fazer cafuné em você. Sentir a textura dos seus fios entre os meus dedos, enquanto você relaxa e, aos poucos, o peso do dia vai indo embora. É um diálogo silencioso de cuidado. No meu toque, tento dizer tudo o que às vezes as palavras não alcançam.`
    },
    {
        type: 'chapter',
        number: 'XXI',
        title: 'A melodia da sua voz',
        content: `Se o amor tivesse um som, ele teria o timbre da sua voz. Não é apenas o que você diz, mas o jeito como as palavras saem de você. Existe uma música na sua fala, uma cadência que me prende e me faz querer ouvir cada frase como se fosse a primeira vez.

Eu amo o som da sua voz logo pela manhã, ainda rouca de sono, e amo o tom que ela ganha quando você está empolgada. Sua voz é o meu guia no escuro e o meu descanso no barulho do mundo. Quando você fala, o caos silencia.`
    },
    {
        type: 'chapter',
        number: 'XXII',
        title: 'O seu sorriso, o meu sol particular',
        content: `O seu sorriso é o meu lugar favorito no mundo. Não é apenas a forma como seus lábios se curvam, mas o jeito como ele ilumina tudo ao redor. Quando você sorri, parece que o mundo ganha cor.

Eu amo as diferentes versões dele: o sorriso tímido, o sorriso cúmplice e aquele sorriso aberto que faz seus olhos de jabuticaba brilharem ainda mais. Seu sorriso é o sol que espanta qualquer dia cinza. Ver você sorrir é ver a prova de que a beleza existe.`
    },
    {
        type: 'chapter',
        number: 'XXIII',
        title: 'O seu toque e a nossa conexão',
        content: `O seu toque é onde o meu mundo encontra o equilíbrio. Não é apenas o contato da pele, mas a eletricidade suave que percorre tudo quando você encosta em mim.

Existe uma calma nas suas mãos. Quando você me toca, é como se todos os meus medos silenciassem. Suas mãos escrevem histórias na minha pele sem precisar de caneta. O seu toque é o meu porto seguro, a âncora que me mantém firme e o carinho que me faz flutuar.`
    },
    {
        type: 'chapter',
        number: 'XXIV',
        title: 'O seu beijo e o tempo que para',
        content: `Se o toque é conexão, o seu beijo é o ápice de tudo o que sentimos. É o momento em que o resto do mundo emudece e só existimos nós dois.

Eu amo o jeito como cada beijo seu é único. É no seu beijo que eu encontro todas as respostas que não sabia que estava procurando. Beijar você é como ler o capítulo mais bonito deste livro em silêncio, sentindo cada vírgula e cada exclamação na pele.`
    },
    {
        type: 'chapter',
        number: 'XXV',
        title: 'O nosso amanhã',
        content: `O futuro é o horizonte onde todos os meus sonhos se encontram com os seus. Eu olho para frente e vejo a gente. Vejo os dias comuns transformados em extraordinários só porque você está neles.

O meu futuro tem o seu nome escrito em cada detalhe. O amanhã não me dá medo, porque ele é o palco onde continuaremos a nossa história. E eu mal posso esperar para viver cada segundo dessa vida que escolhi dividir com você.`
    },
    {
        type: 'chapter',
        number: 'XXVI',
        title: 'Suas manias, o meu mapa favorito',
        content: `Amar você é conhecer o seu mapa de manias e querer morar em cada uma delas. São os seus gestos repetidos que ninguém mais nota, mas que eu coleciono como tesouros.

Eu amo as suas manias porque elas são a prova de que você é única. Suas manias não são defeitos; são as peças que completam o quebra-cabeça de quem você é. Eu não mudaria nenhuma delas.`
    },
    {
        type: 'chapter',
        number: 'XXVII',
        title: 'Seus medos e o meu abraço-abrigo',
        content: `Eu sei que, por trás dessa força toda, também existem medos. E eu quero que você saiba: eu não amo apenas a sua coragem; eu amo também as suas fragilidades.

Quando o mundo parecer assustador demais, lembra que eu estou aqui. Meu abraço é o seu abrigo, o lugar onde você pode descansar as suas preocupações. Eu estarei segurando a sua mão em cada um deles.`
    },
    {
        type: 'chapter',
        number: 'XXVIII',
        title: 'O que você desperta em mim',
        content: `Estar com você me faz sentir a sensação de chegar em casa depois de uma viagem longa. Você desperta em mim uma vontade de ser melhor.

Você me faz sentir seguro, amado e, acima de tudo, visto. Você me traz uma alegria mansa, um frio na barriga que nunca passa e uma certeza que acalma o peito: a de que a vida é muito mais bonita quando dividida com você.`
    },
    {
        type: 'chapter',
        number: 'XIII',
        title: 'Se um dia você esquecer',
        content: `Se um dia você esquecer quem você é, volta aqui. Lê devagar. Sem pressa.

Porque alguém te amou o suficiente para te transformar em livro. E livros assim não são lidos uma vez só. Eles ficam. Eles esperam. Eles acolhem.`
    },
    {
        type: 'final',
        title: 'Fim',
        content: 'Eu estarei aqui.'
    }
];

let currentPageIndex = 0;
const totalPages = chapters.length;
let isAnimating = false;

const pageContent = document.getElementById('pageContent');
const pageContainer = document.getElementById('pageContainer');
const currentPageSpan = document.getElementById('currentPage');
const totalPagesSpan = document.getElementById('totalPages');
const progressFill = document.getElementById('progressFill');
const prevButton = document.getElementById('prevButton');
const nextButton = document.getElementById('nextButton');
const bgMusic = document.getElementById('bgMusic');

window.addEventListener('load', () => {
    if (totalPagesSpan) totalPagesSpan.textContent = totalPages;
    renderPage();
    const hint = document.getElementById('interactionHint');
    if (hint) setTimeout(() => hint.classList.add('hidden'), 5000);
});

function renderPage() {
    if (!pageContent) return;
    const chapter = chapters[currentPageIndex];
    pageContent.innerHTML = '';

    if (chapter.type === 'cover') {
        renderCoverPage(chapter);
    } else if (chapter.type === 'chapter') {
        renderChapterPage(chapter);
    } else if (chapter.type === 'final') {
        renderFinalPage(chapter);
    }

    updatePageInfo();
    updateProgress();
}

function renderCoverPage(chapter) {
    pageContent.innerHTML = `
        <div class="page-cover">
            <div class="cover-ornament">✦</div>
            <h1 class="cover-title">${chapter.title}</h1>
            <p class="cover-subtitle">${chapter.subtitle}</p>
            <div class="cover-line"></div>
            <p class="cover-dedication">${chapter.dedication}</p>
            <div class="cover-ornament">✦</div>
        </div>
    `;
}

function renderChapterPage(chapter) {
    const paragraphs = chapter.content.split(/\n\n/);
    let html = `<div class="chapter-number">${chapter.number || ''}</div><h2 class="chapter-title">${chapter.title}</h2>`;

    paragraphs.forEach((para, index) => {
        const trimmedPara = para.trim();
        if (trimmedPara) {
            if (index === 0 && !trimmedPara.startsWith('<div')) {
                const firstLetter = trimmedPara.charAt(0);
                const restOfText = trimmedPara.substring(1);
                html += `<p><span class="drop-cap">${firstLetter}</span>${restOfText}</p>`;
            } else if (trimmedPara.startsWith('<div')) {
                html += trimmedPara;
            } else {
                html += `<p>${trimmedPara}</p>`;
            }
        }
    });
    pageContent.innerHTML = html;
}

function renderFinalPage(chapter) {
    pageContent.innerHTML = `
        <div class="final-page">
            <p class="final-text">E se um dia você esquecer disso…</p>
            <p class="final-text">volta aqui.</p>
            <p class="final-text final-message">${chapter.content}</p>
            <div class="cover-ornament">✦</div>
        </div>
    `;
}

function updatePageInfo() {
    if (currentPageSpan) currentPageSpan.textContent = currentPageIndex + 1;
    if (prevButton) prevButton.disabled = currentPageIndex === 0;
    if (nextButton) nextButton.disabled = currentPageIndex === totalPages - 1;
}

function updateProgress() {
    if (progressFill) {
        const progress = ((currentPageIndex + 1) / totalPages) * 100;
        progressFill.style.width = progress + '%';
    }
}

function tryPlayMusic() {
    if (bgMusic) {
        bgMusic.volume = 0.5;
        bgMusic.play().catch(e => console.log("Aguardando interação"));
    }
}

document.addEventListener('click', tryPlayMusic, { once: true });

function goToNextPage() {
    if (isAnimating || currentPageIndex >= totalPages - 1) return;
    tryPlayMusic();
    isAnimating = true;
    pageContainer.classList.add('page-exit-left');
    setTimeout(() => {
        currentPageIndex++;
        pageContainer.classList.remove('page-exit-left');
        renderPage();
        isAnimating = false;
    }, 400);
}

function goToPreviousPage() {
    if (isAnimating || currentPageIndex <= 0) return;
    tryPlayMusic();
    isAnimating = true;
    pageContainer.classList.add('page-exit-right');
    setTimeout(() => {
        currentPageIndex--;
        pageContainer.classList.remove('page-exit-right');
        renderPage();
        isAnimating = false;
    }, 400);
}

if (prevButton) prevButton.addEventListener('click', goToPreviousPage);
if (nextButton) nextButton.addEventListener('click', goToNextPage);

document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowRight') goToNextPage();
    if (e.key === 'ArrowLeft') goToPreviousPage();
});
